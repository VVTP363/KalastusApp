{"ast":null,"code":"// VirtavesiTabs.js\nimport React,{useState}from\"react\";import VirtavesiIlmoitus from\"./VirtavesiIlmoitus\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VirtavesiTabs=()=>{const[tab,setTab]=useState(\"ilmoitus\");const saaliit=JSON.parse(localStorage.getItem(\"virtavesisaaliit\")||\"[]\");const renderYhteenveto=()=>{const yhteenveto={};saaliit.forEach(_ref=>{let{laji,maara,cr}=_ref;if(!yhteenveto[laji])yhteenveto[laji]={kpl:0,cr:0};yhteenveto[laji].kpl+=maara;yhteenveto[laji].cr+=cr;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCA Yhteenveto\"}),Object.entries(yhteenveto).map(_ref2=>{let[laji,data]=_ref2;return/*#__PURE__*/_jsxs(\"p\",{children:[laji,\": \",data.kpl,\" kpl (\",data.cr,\" C&R)\"]},laji);})]});};const exportCSV=()=>{const rows=[[\"Aika\",\"Paikka\",\"Laji\",\"Pituus\",\"M√§√§r√§\",\"C&R\"]];saaliit.forEach(s=>{rows.push([s.aika,s.paikka,s.laji,s.pituus,s.maara,s.cr]);});const csvContent=rows.map(r=>r.join(\";\")).join(\"\\n\");const blob=new Blob([csvContent],{type:\"text/csv;charset=utf-8;\"});const link=document.createElement(\"a\");link.href=URL.createObjectURL(blob);link.download=\"virtavesisaaliit.csv\";link.click();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1em\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab(\"ilmoitus\"),children:\"\\uD83C\\uDFA3 Ilmoita saalis\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab(\"historia\"),children:\"\\uD83D\\uDCCB Saalishistoria\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab(\"yhteenveto\"),children:\"\\uD83D\\uDCCA Yhteenveto\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportCSV,style:{marginLeft:\"1em\"},children:\"\\uD83D\\uDCC1 Vie CSV\"})]}),tab===\"ilmoitus\"&&/*#__PURE__*/_jsx(VirtavesiIlmoitus,{}),tab===\"historia\"&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCB Tallennetut saaliit\"}),saaliit.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Ei ilmoituksia.\"}):/*#__PURE__*/_jsx(\"ul\",{children:saaliit.map((s,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[s.aika.split(\"T\")[0],\" \\u2013 \",s.laji,\" \",s.pituus,\", \",s.maara,\" kpl (\",s.cr,\" C&R)\"]},i))})]}),tab===\"yhteenveto\"&&renderYhteenveto()]});};export default VirtavesiTabs;","map":{"version":3,"names":["React","useState","VirtavesiIlmoitus","jsx","_jsx","jsxs","_jsxs","VirtavesiTabs","tab","setTab","saaliit","JSON","parse","localStorage","getItem","renderYhteenveto","yhteenveto","forEach","_ref","laji","maara","cr","kpl","children","Object","entries","map","_ref2","data","exportCSV","rows","s","push","aika","paikka","pituus","csvContent","r","join","blob","Blob","type","link","document","createElement","href","URL","createObjectURL","download","click","style","marginBottom","onClick","marginLeft","length","i","split"],"sources":["C:/Users/veli-pelli/Documents/KalastusApp/frontend/src/components/VirtavesiTabs.js"],"sourcesContent":["// VirtavesiTabs.js\r\nimport React, { useState } from \"react\";\r\nimport VirtavesiIlmoitus from \"./VirtavesiIlmoitus\";\r\n\r\nconst VirtavesiTabs = () => {\r\n  const [tab, setTab] = useState(\"ilmoitus\");\r\n\r\n  const saaliit = JSON.parse(localStorage.getItem(\"virtavesisaaliit\") || \"[]\");\r\n\r\n  const renderYhteenveto = () => {\r\n    const yhteenveto = {};\r\n    saaliit.forEach(({ laji, maara, cr }) => {\r\n      if (!yhteenveto[laji]) yhteenveto[laji] = { kpl: 0, cr: 0 };\r\n      yhteenveto[laji].kpl += maara;\r\n      yhteenveto[laji].cr += cr;\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        <h4>üìä Yhteenveto</h4>\r\n        {Object.entries(yhteenveto).map(([laji, data]) => (\r\n          <p key={laji}>{laji}: {data.kpl} kpl ({data.cr} C&R)</p>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const exportCSV = () => {\r\n    const rows = [\r\n      [\"Aika\", \"Paikka\", \"Laji\", \"Pituus\", \"M√§√§r√§\", \"C&R\"]\r\n    ];\r\n    saaliit.forEach(s => {\r\n      rows.push([s.aika, s.paikka, s.laji, s.pituus, s.maara, s.cr]);\r\n    });\r\n    const csvContent = rows.map(r => r.join(\";\")).join(\"\\n\");\r\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\r\n    const link = document.createElement(\"a\");\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = \"virtavesisaaliit.csv\";\r\n    link.click();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ marginBottom: \"1em\" }}>\r\n        <button onClick={() => setTab(\"ilmoitus\")}>üé£ Ilmoita saalis</button>\r\n        <button onClick={() => setTab(\"historia\")}>üìã Saalishistoria</button>\r\n        <button onClick={() => setTab(\"yhteenveto\")}>üìä Yhteenveto</button>\r\n        <button onClick={exportCSV} style={{ marginLeft: \"1em\" }}>üìÅ Vie CSV</button>\r\n      </div>\r\n\r\n      {tab === \"ilmoitus\" && <VirtavesiIlmoitus />}\r\n\r\n      {tab === \"historia\" && (\r\n        <div>\r\n          <h4>üìã Tallennetut saaliit</h4>\r\n          {saaliit.length === 0 ? <p>Ei ilmoituksia.</p> : (\r\n            <ul>\r\n              {saaliit.map((s, i) => (\r\n                <li key={i}>{s.aika.split(\"T\")[0]} ‚Äì {s.laji} {s.pituus}, {s.maara} kpl ({s.cr} C&R)</li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {tab === \"yhteenveto\" && renderYhteenveto()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VirtavesiTabs;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}