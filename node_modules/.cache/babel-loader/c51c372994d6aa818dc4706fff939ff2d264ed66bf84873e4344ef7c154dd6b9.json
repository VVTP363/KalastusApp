{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\veli-pelli\\\\Documents\\\\KalastusApp\\\\frontend\\\\src\\\\components\\\\Weather.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { XMLParser } from \"fast-xml-parser\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AppContext } from \"./AppContext\"; // üîó Kytket√§√§n kontekstiin\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getCompassDirection = deg => {\n  const directions = [\"Pohjoinen\", \"Koillinen\", \"It√§\", \"Kaakko\", \"Etel√§\", \"Lounas\", \"L√§nsi\", \"Luode\"];\n  return directions[Math.round(deg / 45) % 8];\n};\nconst ForecastItem = ({\n  date,\n  hour,\n  data\n}) => {\n  if (!data || !data.Temperature || !data.FeelsLike || !data.WindSpeedMS || !data.WindDirection) return null;\n  return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"\\u23F0 \", hour, \":00 \\uD83C\\uDF21 \", parseFloat(data.Temperature).toFixed(1), \"\\xB0C (Tuntuu kuin \", parseFloat(data.FeelsLike).toFixed(1), \"\\xB0C) \\uD83D\\uDCA8 \", parseFloat(data.WindSpeedMS).toFixed(1), \" m/s (\", getCompassDirection(data.WindDirection), \")\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, this);\n};\n_c = ForecastItem;\nconst Weather = () => {\n  _s();\n  const {\n    setPressure,\n    setWindDirection,\n    setMoonPhase\n  } = useContext(AppContext); // üîÑ Context-arvojen asettajat\n  const [locationName, setLocationName] = useState(\"\");\n  const [searchLocation, setSearchLocation] = useState(\"\");\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n  const [forecastData, setForecastData] = useState({});\n  const [moon, setMoon] = useState(\"\");\n  const [currentPressure, setCurrentPressure] = useState(null);\n  const [currentWindDirection, setCurrentWindDirection] = useState(null);\n  const [fishingPrediction, setFishingPrediction] = useState(1);\n  const [selectedDateIndex, setSelectedDateIndex] = useState(0);\n  const [readyToRender, setReadyToRender] = useState(false);\n  const navigate = useNavigate();\n  const calculateMoonPhase = () => {\n    const today = new Date();\n    const lastNewMoon = new Date(\"2025-02-28\");\n    const msPerDay = 1000 * 60 * 60 * 24;\n    const moonCycle = 29.53;\n    let diffDays = Math.floor((today - lastNewMoon) / msPerDay) % moonCycle;\n    if (diffDays < 0) diffDays += moonCycle;\n    let phase = \"üåë Uusikuu\";\n    if (diffDays < 1.5) phase = \"üåë Uusikuu\";else if (diffDays < 7.5) phase = \"üåí Kasvava sirppi\";else if (diffDays < 14.5) phase = \"üåì Kasvava puolikuu\";else if (diffDays < 16.5) phase = \"üåï T√§ysikuu\";else if (diffDays < 23) phase = \"üåñ Pienenev√§ kuu 3/4\";else phase = \"üåó Pienenev√§ kuu 4/4\";\n    setMoon(phase);\n    setMoonPhase(phase);\n  };\n  const renderFishIcons = OH => {\n    return Array.from({\n      length: 8\n    }, (_, i) => i < OH - 1 ? \"üî¥\" : i === OH - 1 ? \"üü°\" : \"‚ö™\").join(\" \");\n  };\n  const getUserLocation = () => {\n    if (!navigator.geolocation) return;\n    navigator.geolocation.getCurrentPosition(async position => {\n      const lat = position.coords.latitude;\n      const lon = position.coords.longitude;\n      setLatitude(lat);\n      setLongitude(lon);\n      const res = await axios.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);\n      const addr = res.data.address;\n      const locality = addr.village || addr.town || addr.hamlet || addr.municipality || \"\";\n      const region = addr.city || addr.county || addr.state || \"\";\n      setLocationName(`${locality}, ${region}`.replace(/^, /, \"\").replace(/, $/, \"\"));\n    });\n  };\n  const handleLocationSearch = async () => {\n    if (!searchLocation) return;\n    try {\n      const res = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(searchLocation)}`);\n      if (res.data && res.data.length > 0) {\n        var _addr$;\n        const place = res.data[0];\n        setLatitude(parseFloat(place.lat));\n        setLongitude(parseFloat(place.lon));\n        const addr = place.display_name.split(\",\");\n        setLocationName(`${addr[0].trim()}, ${((_addr$ = addr[1]) === null || _addr$ === void 0 ? void 0 : _addr$.trim()) || \"\"}`);\n        setSelectedDateIndex(0);\n      }\n    } catch (error) {\n      console.error(\"Paikkahaun virhe:\", error);\n    }\n  };\n  useEffect(() => {\n    calculateMoonPhase();\n    getUserLocation();\n  }, []);\n  useEffect(() => {\n    const updateData = async () => {\n      if (latitude && longitude) {\n        setReadyToRender(false);\n        const url = `https://opendata.fmi.fi/wfs?service=WFS&version=2.0.0&request=getFeature&storedquery_id=fmi::forecast::harmonie::surface::point::simple&latlon=${latitude},${longitude}&parameters=Temperature,FeelsLike,WindSpeedMS,WindDirection,Pressure`;\n        try {\n          const response = await axios.get(url);\n          const parsed = new XMLParser({\n            ignoreAttributes: false\n          }).parse(response.data);\n          const elements = parsed[\"wfs:FeatureCollection\"][\"wfs:member\"] || [];\n          const data = {};\n          elements.forEach(el => {\n            const e = el[\"BsWfs:BsWfsElement\"];\n            const time = new Date(e[\"BsWfs:Time\"]);\n            const hour = time.getHours();\n            if (![0, 8, 14, 20].includes(hour)) return;\n            const date = time.toISOString().split(\"T\")[0];\n            const param = e[\"BsWfs:ParameterName\"];\n            const val = e[\"BsWfs:ParameterValue\"];\n            if (!data[date]) data[date] = {};\n            if (!data[date][hour]) data[date][hour] = {};\n            data[date][hour][param] = val;\n          });\n          setForecastData(data);\n          const selectedDate = Object.keys(data)[selectedDateIndex];\n          const forecastForDate = data[selectedDate] || {};\n          const firstHourData = forecastForDate[Object.keys(forecastForDate)[0]];\n          if (firstHourData) {\n            const windDir = parseFloat(firstHourData.WindDirection);\n            const pressure = parseFloat(firstHourData.Pressure);\n            const OH = Math.round(Math.max(1, Math.min(8, 1.5 * pressure / 1013)));\n            setFishingPrediction(OH);\n            setCurrentPressure(pressure);\n            setCurrentWindDirection(getCompassDirection(windDir));\n            setPressure(pressure);\n            setWindDirection(getCompassDirection(windDir));\n          }\n        } catch (err) {\n          console.error(\"S√§√§tietojen haku ep√§onnistui\", err);\n        } finally {\n          setReadyToRender(true);\n        }\n      }\n    };\n    updateData();\n  }, [latitude, longitude, selectedDateIndex, moon]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    const laji = e.target.laji.value;\n    const maara = parseInt(e.target.maara.value);\n    const paino = parseFloat(e.target.paino.value);\n    const cr = parseInt(e.target.cr.value);\n    const uusiSaalis = {\n      aika: new Date().toISOString(),\n      paikka: locationName,\n      laji,\n      maara,\n      paino,\n      cr,\n      ilmanpaine: currentPressure,\n      tuulensuunta: currentWindDirection,\n      kuu: moon\n    };\n    const vanhat = JSON.parse(localStorage.getItem(\"saalisdata\") || \"[]\");\n    const paivitetyt = [...vanhat, uusiSaalis];\n    localStorage.setItem(\"saalisdata\", JSON.stringify(paivitetyt));\n    alert(\"Saalisilmoitus tallennettu!\");\n    e.target.reset();\n  };\n  const dateKeys = Object.keys(forecastData);\n  const selectedDate = dateKeys[selectedDateIndex];\n  const forecastForDate = forecastData[selectedDate] || {};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83C\\uDF26 Kalas\\xE4\\xE4ennuste\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: searchLocation,\n      onChange: e => setSearchLocation(e.target.value),\n      placeholder: \"Hae paikka...\",\n      style: {\n        marginRight: \"0.5em\",\n        width: \"180px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLocationSearch,\n      children: \"\\uD83D\\uDD0D HAE\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getUserLocation,\n      children: \"\\uD83D\\uDCCD OMA PAIKKA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\uD83D\\uDCCD \", locationName, \" (\", latitude === null || latitude === void 0 ? void 0 : latitude.toFixed(4), \", \", longitude === null || longitude === void 0 ? void 0 : longitude.toFixed(4), \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\uD83D\\uDCC8 Ilmanpaine: \", currentPressure, \" hPa\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\uD83C\\uDF19 Kuun vaihe: \", moon]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\uD83C\\uDFA3 Ottihalukkuus: \", fishingPrediction, \"/8\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: renderFishIcons(fishingPrediction)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: selectedDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), Object.entries(forecastForDate).sort(([a], [b]) => parseInt(a) - parseInt(b)).map(([hour, data]) => /*#__PURE__*/_jsxDEV(ForecastItem, {\n      date: selectedDate,\n      hour: hour,\n      data: data\n    }, `${selectedDate}-${hour}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"1em\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedDateIndex(Math.max(selectedDateIndex - 1, 0)),\n        children: \"\\u2B05 Edellinen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedDateIndex(Math.min(selectedDateIndex + 1, dateKeys.length - 1)),\n        children: \"Seuraava \\u27A1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      style: {\n        marginTop: \"2em\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83C\\uDFA3 Saalisilmoitus\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"laji\",\n        required: true,\n        style: {\n          marginRight: \"0.5em\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Valitse kalalaji\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Hauki\",\n          children: \"Hauki\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Ahven\",\n          children: \"Ahven\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Kuha\",\n          children: \"Kuha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Lohi\",\n          children: \"Lohi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Rautu\",\n          children: \"Rautu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Taimen\",\n          children: \"Taimen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Harjus\",\n          children: \"Harjus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Siika\",\n          children: \"Siika\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Muikku\",\n          children: \"Muikku\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Made\",\n          children: \"Made\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"S\\xE4rkikalat\",\n          children: \"S\\xE4rkikalat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"maara\",\n        type: \"number\",\n        min: \"0\",\n        placeholder: \"Kpl\",\n        required: true,\n        style: {\n          width: \"4em\",\n          marginRight: \"0.5em\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"paino\",\n        type: \"number\",\n        min: \"0\",\n        placeholder: \"kg\",\n        step: \"0.1\",\n        style: {\n          width: \"5em\",\n          marginRight: \"0.5em\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"cr\",\n        type: \"number\",\n        min: \"0\",\n        placeholder: \"C&R\",\n        style: {\n          width: \"4em\",\n          marginRight: \"0.5em\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\uD83D\\uDCBE Tallenna\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate(\"/saaliit\"),\n      style: {\n        marginTop: \"2em\"\n      },\n      children: \"\\uD83D\\uDCD1 N\\xE4yt\\xE4 saalistiedot\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate(\"/virtavedet\"),\n      style: {\n        marginTop: \"1em\"\n      },\n      children: \"\\u21AA\\uFE0F VAIHDA VIRTAVETEEN\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"2em\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.open(\"https://julkinen.traficom.fi/oskari/\", \"_blank\"),\n        children: \"\\uD83D\\uDDFA\\uFE0F Traficon Oskari (isot vedet)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.open(\"https://app.karttaselain.fi/\", \"_blank\"),\n        children: \"\\uD83D\\uDDFA\\uFE0F Karttaselain (pienvedet)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n};\n_s(Weather, \"RZaNsQvhTKjORN/JbBnnfUC8VvU=\", false, function () {\n  return [useNavigate];\n});\n_c2 = Weather;\nexport default Weather;\nvar _c, _c2;\n$RefreshReg$(_c, \"ForecastItem\");\n$RefreshReg$(_c2, \"Weather\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","XMLParser","useNavigate","AppContext","jsxDEV","_jsxDEV","getCompassDirection","deg","directions","Math","round","ForecastItem","date","hour","data","Temperature","FeelsLike","WindSpeedMS","WindDirection","children","parseFloat","toFixed","fileName","_jsxFileName","lineNumber","columnNumber","_c","Weather","_s","setPressure","setWindDirection","setMoonPhase","locationName","setLocationName","searchLocation","setSearchLocation","latitude","setLatitude","longitude","setLongitude","forecastData","setForecastData","moon","setMoon","currentPressure","setCurrentPressure","currentWindDirection","setCurrentWindDirection","fishingPrediction","setFishingPrediction","selectedDateIndex","setSelectedDateIndex","readyToRender","setReadyToRender","navigate","calculateMoonPhase","today","Date","lastNewMoon","msPerDay","moonCycle","diffDays","floor","phase","renderFishIcons","OH","Array","from","length","_","i","join","getUserLocation","navigator","geolocation","getCurrentPosition","position","lat","coords","lon","res","get","addr","address","locality","village","town","hamlet","municipality","region","city","county","state","replace","handleLocationSearch","encodeURIComponent","_addr$","place","display_name","split","trim","error","console","updateData","url","response","parsed","ignoreAttributes","parse","elements","forEach","el","e","time","getHours","includes","toISOString","param","val","selectedDate","Object","keys","forecastForDate","firstHourData","windDir","pressure","Pressure","max","min","err","handleSubmit","preventDefault","laji","target","value","maara","parseInt","paino","cr","uusiSaalis","aika","paikka","ilmanpaine","tuulensuunta","kuu","vanhat","JSON","localStorage","getItem","paivitetyt","setItem","stringify","alert","reset","dateKeys","type","onChange","placeholder","style","marginRight","width","onClick","entries","sort","a","b","map","marginTop","onSubmit","name","required","step","window","open","_c2","$RefreshReg$"],"sources":["C:/Users/veli-pelli/Documents/KalastusApp/frontend/src/components/Weather.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { XMLParser } from \"fast-xml-parser\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AppContext } from \"./AppContext\"; // üîó Kytket√§√§n kontekstiin\r\n\r\nconst getCompassDirection = (deg) => {\r\n  const directions = [\"Pohjoinen\", \"Koillinen\", \"It√§\", \"Kaakko\", \"Etel√§\", \"Lounas\", \"L√§nsi\", \"Luode\"];\r\n  return directions[Math.round(deg / 45) % 8];\r\n};\r\n\r\nconst ForecastItem = ({ date, hour, data }) => {\r\n  if (!data || !data.Temperature || !data.FeelsLike || !data.WindSpeedMS || !data.WindDirection) return null;\r\n  return (\r\n    <p>\r\n      ‚è∞ {hour}:00 üå° {parseFloat(data.Temperature).toFixed(1)}¬∞C (Tuntuu kuin {parseFloat(data.FeelsLike).toFixed(1)}¬∞C)\r\n      üí® {parseFloat(data.WindSpeedMS).toFixed(1)} m/s ({getCompassDirection(data.WindDirection)})\r\n    </p>\r\n  );\r\n};\r\n\r\nconst Weather = () => {\r\n  const { setPressure, setWindDirection, setMoonPhase } = useContext(AppContext); // üîÑ Context-arvojen asettajat\r\n  const [locationName, setLocationName] = useState(\"\");\r\n  const [searchLocation, setSearchLocation] = useState(\"\");\r\n  const [latitude, setLatitude] = useState(null);\r\n  const [longitude, setLongitude] = useState(null);\r\n  const [forecastData, setForecastData] = useState({});\r\n  const [moon, setMoon] = useState(\"\");\r\n  const [currentPressure, setCurrentPressure] = useState(null);\r\n  const [currentWindDirection, setCurrentWindDirection] = useState(null);\r\n  const [fishingPrediction, setFishingPrediction] = useState(1);\r\n  const [selectedDateIndex, setSelectedDateIndex] = useState(0);\r\n  const [readyToRender, setReadyToRender] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const calculateMoonPhase = () => {\r\n    const today = new Date();\r\n    const lastNewMoon = new Date(\"2025-02-28\");\r\n    const msPerDay = 1000 * 60 * 60 * 24;\r\n    const moonCycle = 29.53;\r\n    let diffDays = Math.floor((today - lastNewMoon) / msPerDay) % moonCycle;\r\n    if (diffDays < 0) diffDays += moonCycle;\r\n    let phase = \"üåë Uusikuu\";\r\n    if (diffDays < 1.5) phase = \"üåë Uusikuu\";\r\n    else if (diffDays < 7.5) phase = \"üåí Kasvava sirppi\";\r\n    else if (diffDays < 14.5) phase = \"üåì Kasvava puolikuu\";\r\n    else if (diffDays < 16.5) phase = \"üåï T√§ysikuu\";\r\n    else if (diffDays < 23) phase = \"üåñ Pienenev√§ kuu 3/4\";\r\n    else phase = \"üåó Pienenev√§ kuu 4/4\";\r\n    setMoon(phase);\r\n    setMoonPhase(phase);\r\n  };\r\n\r\n  const renderFishIcons = (OH) => {\r\n    return Array.from({ length: 8 }, (_, i) =>\r\n      i < OH - 1 ? \"üî¥\" : i === OH - 1 ? \"üü°\" : \"‚ö™\"\r\n    ).join(\" \");\r\n  };\r\n\r\n  const getUserLocation = () => {\r\n    if (!navigator.geolocation) return;\r\n    navigator.geolocation.getCurrentPosition(async (position) => {\r\n      const lat = position.coords.latitude;\r\n      const lon = position.coords.longitude;\r\n      setLatitude(lat);\r\n      setLongitude(lon);\r\n      const res = await axios.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);\r\n      const addr = res.data.address;\r\n      const locality = addr.village || addr.town || addr.hamlet || addr.municipality || \"\";\r\n      const region = addr.city || addr.county || addr.state || \"\";\r\n      setLocationName(`${locality}, ${region}`.replace(/^, /, \"\").replace(/, $/, \"\"));\r\n    });\r\n  };\r\n\r\n  const handleLocationSearch = async () => {\r\n    if (!searchLocation) return;\r\n    try {\r\n      const res = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(searchLocation)}`);\r\n      if (res.data && res.data.length > 0) {\r\n        const place = res.data[0];\r\n        setLatitude(parseFloat(place.lat));\r\n        setLongitude(parseFloat(place.lon));\r\n        const addr = place.display_name.split(\",\");\r\n        setLocationName(`${addr[0].trim()}, ${addr[1]?.trim() || \"\"}`);\r\n        setSelectedDateIndex(0);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Paikkahaun virhe:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    calculateMoonPhase();\r\n    getUserLocation();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const updateData = async () => {\r\n      if (latitude && longitude) {\r\n        setReadyToRender(false);\r\n        const url = `https://opendata.fmi.fi/wfs?service=WFS&version=2.0.0&request=getFeature&storedquery_id=fmi::forecast::harmonie::surface::point::simple&latlon=${latitude},${longitude}&parameters=Temperature,FeelsLike,WindSpeedMS,WindDirection,Pressure`;\r\n        try {\r\n          const response = await axios.get(url);\r\n          const parsed = new XMLParser({ ignoreAttributes: false }).parse(response.data);\r\n          const elements = parsed[\"wfs:FeatureCollection\"][\"wfs:member\"] || [];\r\n          const data = {};\r\n\r\n          elements.forEach((el) => {\r\n            const e = el[\"BsWfs:BsWfsElement\"];\r\n            const time = new Date(e[\"BsWfs:Time\"]);\r\n            const hour = time.getHours();\r\n            if (![0, 8, 14, 20].includes(hour)) return;\r\n            const date = time.toISOString().split(\"T\")[0];\r\n            const param = e[\"BsWfs:ParameterName\"];\r\n            const val = e[\"BsWfs:ParameterValue\"];\r\n            if (!data[date]) data[date] = {};\r\n            if (!data[date][hour]) data[date][hour] = {};\r\n            data[date][hour][param] = val;\r\n          });\r\n\r\n          setForecastData(data);\r\n\r\n          const selectedDate = Object.keys(data)[selectedDateIndex];\r\n          const forecastForDate = data[selectedDate] || {};\r\n          const firstHourData = forecastForDate[Object.keys(forecastForDate)[0]];\r\n          if (firstHourData) {\r\n            const windDir = parseFloat(firstHourData.WindDirection);\r\n            const pressure = parseFloat(firstHourData.Pressure);\r\n            const OH = Math.round(Math.max(1, Math.min(8, 1.5 * pressure / 1013)));\r\n            setFishingPrediction(OH);\r\n            setCurrentPressure(pressure);\r\n            setCurrentWindDirection(getCompassDirection(windDir));\r\n            setPressure(pressure);\r\n            setWindDirection(getCompassDirection(windDir));\r\n          }\r\n        } catch (err) {\r\n          console.error(\"S√§√§tietojen haku ep√§onnistui\", err);\r\n        } finally {\r\n          setReadyToRender(true);\r\n        }\r\n      }\r\n    };\r\n    updateData();\r\n  }, [latitude, longitude, selectedDateIndex, moon]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const laji = e.target.laji.value;\r\n    const maara = parseInt(e.target.maara.value);\r\n    const paino = parseFloat(e.target.paino.value);\r\n    const cr = parseInt(e.target.cr.value);\r\n\r\n    const uusiSaalis = {\r\n      aika: new Date().toISOString(),\r\n      paikka: locationName,\r\n      laji,\r\n      maara,\r\n      paino,\r\n      cr,\r\n      ilmanpaine: currentPressure,\r\n      tuulensuunta: currentWindDirection,\r\n      kuu: moon\r\n    };\r\n\r\n    const vanhat = JSON.parse(localStorage.getItem(\"saalisdata\") || \"[]\");\r\n    const paivitetyt = [...vanhat, uusiSaalis];\r\n    localStorage.setItem(\"saalisdata\", JSON.stringify(paivitetyt));\r\n\r\n    alert(\"Saalisilmoitus tallennettu!\");\r\n    e.target.reset();\r\n  };\r\n\r\n  const dateKeys = Object.keys(forecastData);\r\n  const selectedDate = dateKeys[selectedDateIndex];\r\n  const forecastForDate = forecastData[selectedDate] || {};\r\n\r\n  return (\r\n    <div>\r\n      <h2>üå¶ Kalas√§√§ennuste</h2>\r\n\r\n      <input\r\n        type=\"text\"\r\n        value={searchLocation}\r\n        onChange={(e) => setSearchLocation(e.target.value)}\r\n        placeholder=\"Hae paikka...\"\r\n        style={{ marginRight: \"0.5em\", width: \"180px\" }}\r\n      />\r\n      <button onClick={handleLocationSearch}>üîç HAE</button>\r\n      <button onClick={getUserLocation}>üìç OMA PAIKKA</button>\r\n\r\n      <p>üìç {locationName} ({latitude?.toFixed(4)}, {longitude?.toFixed(4)})</p>\r\n      <p>üìà Ilmanpaine: {currentPressure} hPa</p>\r\n      <p>üåô Kuun vaihe: {moon}</p>\r\n      <p>üé£ Ottihalukkuus: {fishingPrediction}/8</p>\r\n      <p>{renderFishIcons(fishingPrediction)}</p>\r\n\r\n      <h3>{selectedDate}</h3>\r\n      {Object.entries(forecastForDate)\r\n        .sort(([a], [b]) => parseInt(a) - parseInt(b))\r\n        .map(([hour, data]) => (\r\n          <ForecastItem key={`${selectedDate}-${hour}`} date={selectedDate} hour={hour} data={data} />\r\n        ))}\r\n\r\n      <div style={{ marginTop: \"1em\" }}>\r\n        <button onClick={() => setSelectedDateIndex(Math.max(selectedDateIndex - 1, 0))}>‚¨Ö Edellinen</button>\r\n        <button onClick={() => setSelectedDateIndex(Math.min(selectedDateIndex + 1, dateKeys.length - 1))}>Seuraava ‚û°</button>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} style={{ marginTop: \"2em\" }}>\r\n        <h3>üé£ Saalisilmoitus</h3>\r\n        <select name=\"laji\" required style={{ marginRight: \"0.5em\" }}>\r\n          <option value=\"\">Valitse kalalaji</option>\r\n          <option value=\"Hauki\">Hauki</option>\r\n          <option value=\"Ahven\">Ahven</option>\r\n          <option value=\"Kuha\">Kuha</option>\r\n          <option value=\"Lohi\">Lohi</option>\r\n          <option value=\"Rautu\">Rautu</option>\r\n          <option value=\"Taimen\">Taimen</option>\r\n          <option value=\"Harjus\">Harjus</option>\r\n          <option value=\"Siika\">Siika</option>\r\n          <option value=\"Muikku\">Muikku</option>\r\n          <option value=\"Made\">Made</option>\r\n          <option value=\"S√§rkikalat\">S√§rkikalat</option>\r\n        </select>\r\n        <input name=\"maara\" type=\"number\" min=\"0\" placeholder=\"Kpl\" required style={{ width: \"4em\", marginRight: \"0.5em\" }} />\r\n        <input name=\"paino\" type=\"number\" min=\"0\" placeholder=\"kg\" step=\"0.1\" style={{ width: \"5em\", marginRight: \"0.5em\" }} />\r\n        <input name=\"cr\" type=\"number\" min=\"0\" placeholder=\"C&R\" style={{ width: \"4em\", marginRight: \"0.5em\" }} />\r\n        <button type=\"submit\">üíæ Tallenna</button>\r\n      </form>\r\n\r\n      <button onClick={() => navigate(\"/saaliit\")} style={{ marginTop: \"2em\" }}>üìë N√§yt√§ saalistiedot</button>\r\n      <button onClick={() => navigate(\"/virtavedet\")} style={{ marginTop: \"1em\" }}>‚Ü™Ô∏è VAIHDA VIRTAVETEEN</button>\r\n\r\n      <div style={{ marginTop: \"2em\" }}>\r\n        <button onClick={() => window.open(\"https://julkinen.traficom.fi/oskari/\", \"_blank\")}>üó∫Ô∏è Traficon Oskari (isot vedet)</button>\r\n        <button onClick={() => window.open(\"https://app.karttaselain.fi/\", \"_blank\")}>üó∫Ô∏è Karttaselain (pienvedet)</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Weather;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}