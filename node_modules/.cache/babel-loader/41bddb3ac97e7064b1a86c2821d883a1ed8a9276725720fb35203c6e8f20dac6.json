{"ast":null,"code":"import{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FishingMap(){const[location,setLocation]=useState(null);const[mapProvider,setMapProvider]=useState(\"karttaselain\");const[weather,setWeather]=useState(null);const[showWeather,setShowWeather]=useState(false);const API_KEY=process.env.REACT_APP_WEATHER_API_KEY;const getUserLocation=()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const userLocation={lat:position.coords.latitude,lon:position.coords.longitude};setLocation(userLocation);// üìå Lis√§t√§√§n aikaleima est√§m√§√§n v√§limuistin k√§ytt√∂\nconst timestamp=Date.now();let url;if(mapProvider===\"karttaselain\"){url=`https://app.karttaselain.fi/?lat=${userLocation.lat}&lon=${userLocation.lon}&zoom=12&t=${timestamp}`;}else if(mapProvider===\"oskari\"){url=`https://julkinen.traficom.fi/oskari/?lon=${userLocation.lon}&lat=${userLocation.lat}&zoomLevel=10&t=${timestamp}`;}window.open(url,\"_blank\");// üîó Avataan uusi v√§lilehti\nfetchWeather(userLocation.lat,userLocation.lon);},error=>console.error(\"GPS-virhe:\",error));}else{console.error(\"Sijaintia ei tueta t√§ss√§ selaimessa.\");}};const fetchWeather=async(lat,lon)=>{try{const response=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`);const data=await response.json();setWeather(data);}catch(error){console.error(\"S√§√§datan hakemisessa tapahtui virhe:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"KalastusApp - Karttan\\xE4kym\\xE4\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Valitse karttapohja:\",\" \",/*#__PURE__*/_jsxs(\"select\",{value:mapProvider,onChange:e=>setMapProvider(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"karttaselain\",children:\"Karttaselain\"}),/*#__PURE__*/_jsx(\"option\",{value:\"oskari\",children:\"Traficomin Oskari\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:getUserLocation,children:\"\\uD83D\\uDCCD Avaa kartta\"}),location&&/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83C\\uDF0D Kartta avattu sijaintiin: \",location.lat,\", \",location.lon]}),weather&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"20px\",background:\"#f8f9fa\",padding:\"10px\",borderRadius:\"5px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDF26 S\\xE4\\xE4ennuste\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCCD \",weather.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83C\\uDF21 L\\xE4mp\\xF6tila: \",weather.main.temp,\"\\xB0C\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCA8 Tuulen nopeus: \",weather.wind.speed,\" m/s\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83E\\uDDED Tuulen suunta: \",weather.wind.deg,\"\\xB0\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowWeather(true),children:\"N\\xE4yt\\xE4 s\\xE4\\xE4 60s\"}),showWeather&&/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",top:\"10px\",right:\"10px\",background:\"rgba(255,255,255,0.9)\",padding:\"10px\",borderRadius:\"5px\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83C\\uDF26 \",weather.weather[0].description]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowWeather(false),children:\"Sulje\"})]})]})]});}","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","jsxs","_jsxs","FishingMap","location","setLocation","mapProvider","setMapProvider","weather","setWeather","showWeather","setShowWeather","API_KEY","process","env","REACT_APP_WEATHER_API_KEY","getUserLocation","navigator","geolocation","getCurrentPosition","position","userLocation","lat","coords","latitude","lon","longitude","timestamp","Date","now","url","window","open","fetchWeather","error","console","response","fetch","data","json","children","value","onChange","e","target","onClick","style","marginTop","background","padding","borderRadius","name","main","temp","wind","speed","deg","top","right","description"],"sources":["C:/Users/veli-pelli/Documents/KalastusApp/src/components/FishingMap.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nexport default function FishingMap() {\n  const [location, setLocation] = useState(null);\n  const [mapProvider, setMapProvider] = useState(\"karttaselain\");\n  const [weather, setWeather] = useState(null);\n  const [showWeather, setShowWeather] = useState(false);\n  const API_KEY = process.env.REACT_APP_WEATHER_API_KEY;\n\n  const getUserLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const userLocation = {\n            lat: position.coords.latitude,\n            lon: position.coords.longitude,\n          };\n          setLocation(userLocation);\n\n          // üìå Lis√§t√§√§n aikaleima est√§m√§√§n v√§limuistin k√§ytt√∂\n          const timestamp = Date.now();\n\n          let url;\n          if (mapProvider === \"karttaselain\") {\n            url = `https://app.karttaselain.fi/?lat=${userLocation.lat}&lon=${userLocation.lon}&zoom=12&t=${timestamp}`;\n          } else if (mapProvider === \"oskari\") {\n            url = `https://julkinen.traficom.fi/oskari/?lon=${userLocation.lon}&lat=${userLocation.lat}&zoomLevel=10&t=${timestamp}`;\n          }\n\n          window.open(url, \"_blank\"); // üîó Avataan uusi v√§lilehti\n          fetchWeather(userLocation.lat, userLocation.lon);\n        },\n        (error) => console.error(\"GPS-virhe:\", error)\n      );\n    } else {\n      console.error(\"Sijaintia ei tueta t√§ss√§ selaimessa.\");\n    }\n  };\n\n  const fetchWeather = async (lat, lon) => {\n    try {\n      const response = await fetch(\n        `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`\n      );\n      const data = await response.json();\n      setWeather(data);\n    } catch (error) {\n      console.error(\"S√§√§datan hakemisessa tapahtui virhe:\", error);\n    }\n  };\n\n  return (\n    <div>\n      <h1>KalastusApp - Karttan√§kym√§</h1>\n\n      <label>\n        Valitse karttapohja:{\" \"}\n        <select value={mapProvider} onChange={(e) => setMapProvider(e.target.value)}>\n          <option value=\"karttaselain\">Karttaselain</option>\n          <option value=\"oskari\">Traficomin Oskari</option>\n        </select>\n      </label>\n\n      <button onClick={getUserLocation}>üìç Avaa kartta</button>\n\n      {location && (\n        <p>üåç Kartta avattu sijaintiin: {location.lat}, {location.lon}</p>\n      )}\n\n      {weather && (\n        <div style={{ marginTop: \"20px\", background: \"#f8f9fa\", padding: \"10px\", borderRadius: \"5px\" }}>\n          <h2>üå¶ S√§√§ennuste</h2>\n          <p>üìç {weather.name}</p>\n          <p>üå° L√§mp√∂tila: {weather.main.temp}¬∞C</p>\n          <p>üí® Tuulen nopeus: {weather.wind.speed} m/s</p>\n          <p>üß≠ Tuulen suunta: {weather.wind.deg}¬∞</p>\n\n          <button onClick={() => setShowWeather(true)}>N√§yt√§ s√§√§ 60s</button>\n          {showWeather && (\n            <div style={{\n              position: \"absolute\", top: \"10px\", right: \"10px\",\n              background: \"rgba(255,255,255,0.9)\", padding: \"10px\", borderRadius: \"5px\"\n            }}>\n              <p>üå¶ {weather.weather[0].description}</p>\n              <button onClick={() => setShowWeather(false)}>Sulje</button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}